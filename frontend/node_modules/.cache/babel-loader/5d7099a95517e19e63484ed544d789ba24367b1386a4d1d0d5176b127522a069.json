{"ast":null,"code":"import\"./App.css\";import{useState,useEffect}from\"react\";import{Routes,Route}from\"react-router-dom\";import Home from\"./components/home/Home\";import Header from\"./components/header/Header\";import Trailer from\"./components/trailer/Trailer\";import Reviews from\"./components/reviews/Reviews\";import Login from\"./components/auth/login/Login\";import Register from\"./components/auth/register/Register\";import SessionManager from\"./SessionManager\";import api from\"./api/axiosConfig\";import Welcome from\"./components/welcome/Welcome\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const{token,username,handleLogin,handleLogout}=SessionManager();const[isLoggedIn,setIsLoggedIn]=useState(token.length>1);const[movies,setMovies]=useState();const[filteredMovies,setFilteredMovies]=useState();const[movie,setMovie]=useState();const[reviews,setReviews]=useState([]);const[allReviews,setAllReviews]=useState([]);const getMovies=async()=>{try{const response=await api.get(\"/api/v1/movies\");setMovies(response.data);setFilteredMovies([...response.data]);}catch(err){console.log(err);}};const getAllReviews=async()=>{try{const response=await api.get(\"/api/v1/reviews/all-reviews\");setAllReviews(response.data);}catch(err){console.log(err);}};const getMovieData=async movieId=>{try{const response=await api.get(\"/api/v1/movies/\".concat(movieId));const singleMovie=response.data;setMovie(singleMovie);setReviews(singleMovie.reviewIds);}catch(error){console.log(error);}};function handleGenreClick(genreName){if(genreName===\"All\"){setFilteredMovies(movies);}else{const filteredMovies=movies.filter(movie=>movie.genres.includes(genreName));setFilteredMovies(filteredMovies);}}useEffect(()=>{setIsLoggedIn(token.length>1);},[token,username,handleLogout,isLoggedIn]);useEffect(()=>{getMovies();getAllReviews();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{isLoggedIn:isLoggedIn}),/*#__PURE__*/_jsx(Welcome,{username:username,isLoggedIn:isLoggedIn}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{filteredMovies:filteredMovies,allMovies:movies,handleGenreClick:handleGenreClick,allReviews:allReviews})}),/*#__PURE__*/_jsx(Route,{path:\"/Trailer/:ytTrailerId\",element:/*#__PURE__*/_jsx(Trailer,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{handleLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Reviews/:movieId\",element:/*#__PURE__*/_jsx(Reviews,{getMovieData:getMovieData,movie:movie,reviews:reviews,setReviews:setReviews})})]})]});}export default App;","map":{"version":3,"names":["useState","useEffect","Routes","Route","Home","Header","Trailer","Reviews","Login","Register","SessionManager","api","Welcome","jsx","_jsx","jsxs","_jsxs","App","token","username","handleLogin","handleLogout","isLoggedIn","setIsLoggedIn","length","movies","setMovies","filteredMovies","setFilteredMovies","movie","setMovie","reviews","setReviews","allReviews","setAllReviews","getMovies","response","get","data","err","console","log","getAllReviews","getMovieData","movieId","concat","singleMovie","reviewIds","error","handleGenreClick","genreName","filter","genres","includes","className","children","path","element","allMovies"],"sources":["C:/Users/SANTI/Documents/GitHub/movie-review-app/frontend/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport { useState, useEffect } from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport Home from \"./components/home/Home\";\nimport Header from \"./components/header/Header\";\nimport Trailer from \"./components/trailer/Trailer\";\nimport Reviews from \"./components/reviews/Reviews\";\nimport Login from \"./components/auth/login/Login\";\nimport Register from \"./components/auth/register/Register\";\nimport SessionManager from \"./SessionManager\";\nimport api from \"./api/axiosConfig\";\nimport Welcome from \"./components/welcome/Welcome\";\n\nfunction App() {\n  const { token, username, handleLogin, handleLogout } = SessionManager();\n  const [isLoggedIn, setIsLoggedIn] = useState(token.length > 1);\n  const [movies, setMovies] = useState();\n  const [filteredMovies, setFilteredMovies] = useState();\n  const [movie, setMovie] = useState();\n  const [reviews, setReviews] = useState([]);\n  const [allReviews, setAllReviews] = useState([]);\n\n  const getMovies = async () => {\n    try {\n      const response = await api.get(\"/api/v1/movies\");\n      setMovies(response.data);\n      setFilteredMovies([...response.data]);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const getAllReviews = async () => {\n    try {\n      const response = await api.get(\"/api/v1/reviews/all-reviews\");\n      setAllReviews(response.data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const getMovieData = async (movieId) => {\n    try {\n      const response = await api.get(`/api/v1/movies/${movieId}`);\n      const singleMovie = response.data;\n      setMovie(singleMovie);\n      setReviews(singleMovie.reviewIds);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  function handleGenreClick(genreName) {\n    if (genreName === \"All\") {\n      setFilteredMovies(movies);\n    } else {\n      const filteredMovies = movies.filter((movie) =>\n        movie.genres.includes(genreName)\n      );\n      setFilteredMovies(filteredMovies);\n    }\n  }\n\n  useEffect(() => {\n    setIsLoggedIn(token.length > 1);\n  }, [token, username, handleLogout, isLoggedIn]);\n\n  useEffect(() => {\n    getMovies();\n    getAllReviews();\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Header isLoggedIn={isLoggedIn} />\n      <Welcome username={username} isLoggedIn={isLoggedIn} />\n      <Routes>\n        <Route\n          path=\"/\"\n          element={\n            <Home\n              filteredMovies={filteredMovies}\n              allMovies={movies}\n              handleGenreClick={handleGenreClick}\n              allReviews={allReviews}\n            />\n          }\n        />\n        <Route path=\"/Trailer/:ytTrailerId\" element={<Trailer />} />\n        <Route path=\"/login\" element={<Login handleLogin={handleLogin} />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route\n          path=\"/Reviews/:movieId\"\n          element={\n            <Reviews\n              getMovieData={getMovieData}\n              movie={movie}\n              reviews={reviews}\n              setReviews={setReviews}\n            />\n          }\n        ></Route>\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}